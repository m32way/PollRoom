---
description: Test-Driven Development standards and practices for PollRoom
globs: ["**/*.test.ts", "**/*.spec.ts", "**/__tests__/**"]
alwaysApply: false
---

# Test-Driven Development Standards

## TDD Process:

1. **Red**: Write a failing test that defines the desired behavior
2. **Green**: Write minimal code to make the test pass
3. **Refactor**: Improve code while keeping tests green

## Testing Requirements:

- Use Jest for unit and integration testing
- Mock external dependencies (Supabase, KV) in tests
- Write tests first, then implement features
- Ensure comprehensive test coverage for all API endpoints
- Use descriptive test names that explain the behavior being tested

## Test Structure:

- Group related tests with `describe` blocks
- Use `beforeEach` to set up test data
- Mock external services consistently
- Test both success and error scenarios
- Validate response formats and status codes

## Mocking Guidelines:

- Mock Supabase client responses
- Mock KV session management
- Mock external API calls
- Use realistic test data that matches production schemas

## end-to-end tests

- e2e tests must adhere to the guidelines in https://playwright.dev/docs/best-practices
